<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" href="css/style.css" rel="stylesheet">
    <title></title>
</head>

<body>
    <nav><i class="material-icons" id="backBtn">arrow_back</i></nav>
    <div class="main">

    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script>
        var main = document.querySelector(".main");

        $.ajax({
            url: 'http://127.0.0.1:8000/getAll',
            success: function(db) {
                for (var i = 0; i < db.length; i++) {
                    var divRow = document.createElement("div");
                    main.appendChild(divRow);
                    divRow.classList.add("row");

                    var col = document.createElement("div");
                    divRow.appendChild(col);
                    col.classList.add("col", "s12", "m6");

                    var card = document.createElement("div");
                    col.appendChild(card);
                    card.classList.add("card", "blue-grey", "darken-1");

                    var cardContent = document.createElement("div");
                    card.appendChild(cardContent);
                    cardContent.classList.add("card-content", "white-text");

                    var cardTitle = document.createElement("span");
                    cardContent.appendChild(cardTitle);
                    cardTitle.classList.add("card-title");
                    cardTitle.innerHTML = "Время работы: " + db[i]["time"];

                    var cardP = document.createElement("p");
                    cardContent.appendChild(cardP);
                    cardP.innerHTML = db[i]["description"];

                    var cardAction = document.createElement("div");
                    card.appendChild(cardAction);
                    cardAction.classList.add("card-action");

                    var carda = document.createElement("a");
                    cardAction.appendChild(carda);
                    carda.innerHTML = db[i]["number"];

                    var cardPP = document.createElement("p");
                    cardAction.appendChild(cardPP);
                    

                    $.ajax({
                        url: 'http://127.0.0.1:8000/getAdCreater',
                        data: {
                            "user_id":db[i]["user_id"]
                        },
                        success: function(data) {
                            cardPP.innerHTML = data[i]["name"];
                        }
                    });
                }
            }
        });

        $("#backBtn").on("click", function() {
            location.replace("userPage.html");

        });

    </script>
</body>

</html>
